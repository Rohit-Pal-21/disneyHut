{"ast":null,"code":"var _jsxFileName = \"/home/acer/Desktop/project1/myMovies/client/src/pages/movies/TrendingMovies.js\",\n    _s = $RefreshSig$();\n\nimport BackNavigation from \"../../components/general/BackNavigation\";\nimport TrendingCategory from \"../../components/general/Category\";\nimport Footer from \"../../components/general/Footer\";\nimport { useGetMovieTrendingPageQuery } from \"../../redux/tmdbApi\";\nimport { resetPage } from \"../../redux/layoutSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport useUniqueData from \"../../hooks/useUniqueData\";\nimport ListingScreen from \"../../loaders/screens/ListingScreen\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst TrendingMovies = () => {\n  _s();\n\n  const page = useSelector(state => state.layout.page);\n  const {\n    data,\n    isFetching,\n    isLoading\n  } = useGetMovieTrendingPageQuery(page);\n  const [final, setFinal] = useState([]);\n  const dispatch = useDispatch();\n  const {\n    uniqueItems\n  } = useUniqueData(final);\n  useEffect(() => {\n    if (data && !isFetching) {\n      setFinal(final => final.concat(...data.results));\n    }\n  }, [data, isFetching]); // Reset to page 1 when unmounts\n\n  useEffect(() => {\n    return () => {\n      dispatch(resetPage());\n      setFinal([]);\n    };\n  }, [dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full\",\n    children: !isLoading && data ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(BackNavigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TrendingCategory, {\n        data: uniqueItems,\n        isFetching: isFetching,\n        heading: \"Trending Movies\",\n        totalPages: data === null || data === void 0 ? void 0 : data.total_pages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(ListingScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TrendingMovies, \"r2liktGjcf3Q9xJFNwpplL5W9tU=\", false, function () {\n  return [useSelector, useGetMovieTrendingPageQuery, useDispatch, useUniqueData];\n});\n\n_c = TrendingMovies;\nexport default TrendingMovies;\n\nvar _c;\n\n$RefreshReg$(_c, \"TrendingMovies\");","map":{"version":3,"names":["BackNavigation","TrendingCategory","Footer","useGetMovieTrendingPageQuery","resetPage","useSelector","useDispatch","useState","useEffect","useUniqueData","ListingScreen","TrendingMovies","page","state","layout","data","isFetching","isLoading","final","setFinal","dispatch","uniqueItems","concat","results","total_pages"],"sources":["/home/acer/Desktop/project1/myMovies/client/src/pages/movies/TrendingMovies.js"],"sourcesContent":["import BackNavigation from \"../../components/general/BackNavigation\";\nimport TrendingCategory from \"../../components/general/Category\";\nimport Footer from \"../../components/general/Footer\";\nimport { useGetMovieTrendingPageQuery } from \"../../redux/tmdbApi\";\nimport { resetPage } from \"../../redux/layoutSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport useUniqueData from \"../../hooks/useUniqueData\";\nimport ListingScreen from \"../../loaders/screens/ListingScreen\";\n\nconst TrendingMovies = () => {\n  const page = useSelector(state => state.layout.page);\n  const { data, isFetching, isLoading } = useGetMovieTrendingPageQuery(page);\n  const [final, setFinal] = useState([]);\n  const dispatch = useDispatch();\n  const { uniqueItems } = useUniqueData(final);\n\n  useEffect(() => {\n    if(data && !isFetching) {\n      setFinal(final => final.concat(...data.results));\n    }\n  }, [data, isFetching])\n\n  // Reset to page 1 when unmounts\n  useEffect(() => {\n    return () => {\n      dispatch(resetPage())\n      setFinal([])\n    }\n  },[dispatch])\n\n  return (\n    <div className=\"w-full\">\n      {!isLoading && data ?\n      <>\n        <BackNavigation />\n        <TrendingCategory\n          data={uniqueItems}\n          isFetching={isFetching}\n          heading=\"Trending Movies\"\n          totalPages={data?.total_pages}\n          />\n        <Footer />\n        </>\n        :\n        <ListingScreen />\n      }\n    </div>\n  )\n}\nexport default TrendingMovies"],"mappings":";;;AAAA,OAAOA,cAAP,MAA2B,yCAA3B;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,SAASC,4BAAT,QAA6C,qBAA7C;AACA,SAASC,SAAT,QAA0B,yBAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,aAAP,MAA0B,2BAA1B;AACA,OAAOC,aAAP,MAA0B,qCAA1B;;;;AAEA,MAAMC,cAAc,GAAG,MAAM;EAAA;;EAC3B,MAAMC,IAAI,GAAGP,WAAW,CAACQ,KAAK,IAAIA,KAAK,CAACC,MAAN,CAAaF,IAAvB,CAAxB;EACA,MAAM;IAAEG,IAAF;IAAQC,UAAR;IAAoBC;EAApB,IAAkCd,4BAA4B,CAACS,IAAD,CAApE;EACA,MAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAMa,QAAQ,GAAGd,WAAW,EAA5B;EACA,MAAM;IAAEe;EAAF,IAAkBZ,aAAa,CAACS,KAAD,CAArC;EAEAV,SAAS,CAAC,MAAM;IACd,IAAGO,IAAI,IAAI,CAACC,UAAZ,EAAwB;MACtBG,QAAQ,CAACD,KAAK,IAAIA,KAAK,CAACI,MAAN,CAAa,GAAGP,IAAI,CAACQ,OAArB,CAAV,CAAR;IACD;EACF,CAJQ,EAIN,CAACR,IAAD,EAAOC,UAAP,CAJM,CAAT,CAP2B,CAa3B;;EACAR,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXY,QAAQ,CAAChB,SAAS,EAAV,CAAR;MACAe,QAAQ,CAAC,EAAD,CAAR;IACD,CAHD;EAID,CALQ,EAKP,CAACC,QAAD,CALO,CAAT;EAOA,oBACE;IAAK,SAAS,EAAC,QAAf;IAAA,UACG,CAACH,SAAD,IAAcF,IAAd,gBACD;MAAA,wBACE,QAAC,cAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAEE,QAAC,gBAAD;QACE,IAAI,EAAEM,WADR;QAEE,UAAU,EAAEL,UAFd;QAGE,OAAO,EAAC,iBAHV;QAIE,UAAU,EAAED,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAES;MAJpB;QAAA;QAAA;QAAA;MAAA,QAFF,eAQE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QARF;IAAA,gBADC,gBAYC,QAAC,aAAD;MAAA;MAAA;MAAA;IAAA;EAbJ;IAAA;IAAA;IAAA;EAAA,QADF;AAkBD,CAvCD;;GAAMb,c;UACSN,W,EAC2BF,4B,EAEvBG,W,EACOG,a;;;KALpBE,c;AAwCN,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}