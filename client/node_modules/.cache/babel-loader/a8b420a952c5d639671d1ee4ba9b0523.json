{"ast":null,"code":"var _jsxFileName = \"/home/acer/Desktop/project1/myMovies/client/src/components/general/Search.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useState } from \"react\";\nimport { useLocation, useSearchParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setSearch } from \"../../redux/layoutSlice\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FaTimes } from \"@react-icons/all-files/fa/FaTimes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const {\n    isSearch\n  } = useSelector(state => state.layout);\n  const searchBarRef = useRef();\n  const searchInputRef = useRef();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [searchParam, setSearchParam] = useSearchParams();\n  const [lastPage, setLastPage] = useState(\"\"); // Get last path excluding search page\n\n  useEffect(() => {\n    if (location && !location.pathname.includes(\"/search\")) {\n      setLastPage(location.pathname);\n      dispatch(setSearch(false));\n    }\n  }, [location, dispatch]); // Handle search bar open & close\n\n  useEffect(() => {\n    const handleClickOutside = e => {\n      if (searchBarRef.current && !searchBarRef.current.contains(e.target) && !location.pathname.includes(\"/search\") && e.target.id !== \"searchButton\" && e.target.id !== \"searchIcon\") {\n        dispatch(setSearch(false));\n      }\n    };\n\n    document.addEventListener(\"click\", handleClickOutside, true);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, true);\n    };\n  }, [dispatch, location]); // Handle Search Params\n\n  const handleSearchParam = e => {\n    const term = e.target.value;\n\n    if (term) {\n      navigate({\n        pathname: \"/search\",\n        search: `?q=${term}`\n      });\n    } // Go back to previous page\n\n\n    if (!term) {\n      navigate(lastPage);\n      setSearch(false);\n    }\n  }; // Handle Search Clear\n\n\n  const handleSearchClear = () => {\n    navigate(lastPage);\n    setSearch(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isSearch && /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: searchBarRef,\n      className: `w-full flex justify-between items-center px-4 md:px-10 lg:px-12 xl:pl-[160px] py-2 md:py-4 bg-card fixed z-50 searchBar`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-control w-full mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            autoFocus: true,\n            type: \"text\",\n            placeholder: \"Search for a movie, show or person...\",\n            className: \"placeholder:text-gray-500 text-gray-200 input md:text-lg px-0 input-bordered bg-transparent border-none focus:outline-none w-full\",\n            ref: searchInputRef,\n            value: searchParam.get(\"q\") ? searchParam.get(\"q\") : \"\",\n            onChange: handleSearchParam\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), searchParam.get(\"q\") && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearchClear,\n        children: /*#__PURE__*/_jsxDEV(FaTimes, {\n          className: \"text-2xl mg:text-4xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Search, \"9e+I6z+j20kfBVRBTt+yw3cKPSQ=\", false, function () {\n  return [useSelector, useDispatch, useNavigate, useLocation, useSearchParams];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useRef","useEffect","useState","useLocation","useSearchParams","useSelector","useDispatch","setSearch","useNavigate","FaTimes","Search","isSearch","state","layout","searchBarRef","searchInputRef","dispatch","navigate","location","searchParam","setSearchParam","lastPage","setLastPage","pathname","includes","handleClickOutside","e","current","contains","target","id","document","addEventListener","removeEventListener","handleSearchParam","term","value","search","handleSearchClear","get"],"sources":["/home/acer/Desktop/project1/myMovies/client/src/components/general/Search.js"],"sourcesContent":["import { useRef, useEffect, useState } from \"react\";\nimport { useLocation, useSearchParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setSearch } from \"../../redux/layoutSlice\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FaTimes } from \"@react-icons/all-files/fa/FaTimes\";\n\nconst Search = () => {\n  const { isSearch } = useSelector((state) => state.layout);\n  const searchBarRef = useRef();\n  const searchInputRef = useRef();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [searchParam, setSearchParam] = useSearchParams();\n  const [lastPage, setLastPage] = useState(\"\");\n\n  // Get last path excluding search page\n  useEffect(() => {\n    if (location && !location.pathname.includes(\"/search\")) {\n      setLastPage(location.pathname);\n      dispatch(setSearch(false));\n    }\n  }, [location, dispatch]);\n\n  // Handle search bar open & close\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (\n        searchBarRef.current &&\n        !searchBarRef.current.contains(e.target) &&\n        !location.pathname.includes(\"/search\") &&\n        e.target.id !== \"searchButton\" &&\n        e.target.id !== \"searchIcon\"\n      ) {\n        dispatch(setSearch(false));\n      }\n    };\n\n    document.addEventListener(\"click\", handleClickOutside, true);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, true);\n    };\n  }, [dispatch, location]);\n\n  // Handle Search Params\n  const handleSearchParam = (e) => {\n    const term = e.target.value;\n    if (term) {\n      navigate({\n        pathname: \"/search\",\n        search: `?q=${term}`,\n      });\n    }\n    // Go back to previous page\n    if (!term) {\n      navigate(lastPage);\n      setSearch(false);\n    }\n  };\n\n  // Handle Search Clear\n  const handleSearchClear = () => {\n    navigate(lastPage);\n    setSearch(false);\n  };\n\n  return (\n    <>\n      {isSearch && (\n        <div\n          ref={searchBarRef}\n          className={`w-full flex justify-between items-center px-4 md:px-10 lg:px-12 xl:pl-[160px] py-2 md:py-4 bg-card fixed z-50 searchBar`}\n        >\n          {/* Search Field */}\n          <div className=\"form-control w-full mx-auto\">\n            <div className=\"input-group\">\n              <input\n                autoFocus\n                type=\"text\"\n                placeholder=\"Search for a movie, show or person...\"\n                className=\"placeholder:text-gray-500 text-gray-200 input md:text-lg px-0 input-bordered bg-transparent border-none focus:outline-none w-full\"\n                ref={searchInputRef}\n                value={searchParam.get(\"q\") ? searchParam.get(\"q\") : \"\"}\n                onChange={handleSearchParam}\n              />\n            </div>\n          </div>\n\n          {/* Cancel Button */}\n          {searchParam.get(\"q\") && (\n            <button onClick={handleSearchClear}>\n              <FaTimes className=\"text-2xl mg:text-4xl\" />\n            </button>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}