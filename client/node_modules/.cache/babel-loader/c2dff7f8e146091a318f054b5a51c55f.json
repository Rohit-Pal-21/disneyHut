{"ast":null,"code":"var _jsxFileName = \"/home/acer/My  Movies WAD Project/disneyHut/client/src/components/general/CardListing.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef } from \"react\";\nimport { FaEllipsisH } from \"@react-icons/all-files/fa/FaEllipsisH\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport LoadingCard from \"../../assets/LoadingCard.svg\";\nimport EmptyCard from \"../../assets/EmptyCard.svg\";\nimport { setPage } from \"../../redux/layoutSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport CardActions from \"./CardActions\";\nimport { setCardAction } from \"../../redux/layoutSlice\";\nimport { setUserInfo } from \"../../redux/userSlice\";\nimport LazyImage from \"../../loaders/LazyImage\";\nimport useUniqueData from \"../../hooks/useUniqueData\";\nimport CardRating from \"../rating/CardRating\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CardListing = _ref => {\n  _s();\n\n  let {\n    data,\n    isFetching,\n    pages,\n    mediaType\n  } = _ref;\n  const poster = useSelector(state => state.layout.poster);\n  const page = useSelector(state => state.layout.page);\n  const dispatch = useDispatch();\n  const cardRef = useRef();\n  const pathName = useLocation().pathname;\n  const cardAction = useSelector(state => state.layout.cardAction);\n  const {\n    uniqueItems\n  } = useUniqueData(data);\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && !isFetching && page < pages) {\n        dispatch(setPage());\n      } // unobserve on intersection\n\n\n      if (entries[0].isIntersecting) observer.unobserve(entries[0].target);\n    }); // observe card\n\n    if (cardRef.current) observer.observe(cardRef.current);\n  }, [data, cardRef, isFetching, dispatch, pages, page, uniqueItems]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3\",\n    children: [cardAction && /*#__PURE__*/_jsxDEV(CardActions, {\n      mediaType: mediaType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 20\n    }, this), uniqueItems && uniqueItems.map(item => {\n      var _item$vote_average;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: cardRef,\n        className: \"w-full aspect-[0.67/1] h-auto carousel-item flex flex-col rounded-md bg-nav cursor-pointer transition-all hover:scale-105 ease-in\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          \"aria-label\": \"card\",\n          to: item.media_type === \"movie\" || pathName.includes(\"/movies/\") ? `/movies/${item.id}` : item.media_type === \"tv\" || pathName.includes(\"/shows/\") ? `/shows/${item.id}` : item.media_type === \"person\" || pathName.includes(\"/person/\") ? `/person/${item.id}` : \"\",\n          children: /*#__PURE__*/_jsxDEV(LazyImage, {\n            src: item.poster_path ? poster + item.poster_path : item.profile_path ? poster + item.profile_path : EmptyCard,\n            placeholder: LoadingCard,\n            type: \"card\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-1 px-2 py-1 sm:py-2\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            \"aria-label\": \"card\",\n            to: item.media_type === \"movie\" ? `/movies/${item.id}` : item.media_type === \"tv\" ? `/shows/${item.id}` : item.media_type === \"person\" ? `/person/${item.id}` : \"\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"hidden sm:block sm:text-sm sm:font-medium truncate\",\n              children: item.original_title || item.original_name || item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), item.known_for_department && /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"hidden sm:block sm:text-sm sm:font-light truncate\",\n            children: item.known_for_department\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hidden sm:flex items-center gap-2\",\n            children: [item.hasOwnProperty(\"vote_average\") && /*#__PURE__*/_jsxDEV(CardRating, {\n              item: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 57\n            }, this), item.vote_average > 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hidden sm:inline-block\",\n              children: (_item$vote_average = item.vote_average) === null || _item$vote_average === void 0 ? void 0 : _item$vote_average.toFixed(1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this) : item.vote_average === 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hidden sm:inline-block\",\n              children: \"N.A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full flex justify-end items-center\",\n            onClick: () => {\n              dispatch(setCardAction(true));\n              dispatch(setUserInfo(item));\n            },\n            children: /*#__PURE__*/_jsxDEV(FaEllipsisH, {\n              className: \"text-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CardListing, \"mbgpaNZrASp97ftKpC/haa9JYGY=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useLocation, useSelector, useUniqueData];\n});\n\n_c = CardListing;\nexport default CardListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardListing\");","map":{"version":3,"names":["useEffect","useRef","FaEllipsisH","Link","useLocation","LoadingCard","EmptyCard","setPage","useDispatch","useSelector","CardActions","setCardAction","setUserInfo","LazyImage","useUniqueData","CardRating","CardListing","data","isFetching","pages","mediaType","poster","state","layout","page","dispatch","cardRef","pathName","pathname","cardAction","uniqueItems","observer","IntersectionObserver","entries","isIntersecting","unobserve","target","current","observe","map","item","media_type","includes","id","poster_path","profile_path","original_title","original_name","name","known_for_department","hasOwnProperty","vote_average","toFixed"],"sources":["/home/acer/My  Movies WAD Project/disneyHut/client/src/components/general/CardListing.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport { FaEllipsisH } from \"@react-icons/all-files/fa/FaEllipsisH\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport LoadingCard from \"../../assets/LoadingCard.svg\";\nimport EmptyCard from \"../../assets/EmptyCard.svg\";\nimport { setPage } from \"../../redux/layoutSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport CardActions from \"./CardActions\";\nimport { setCardAction } from \"../../redux/layoutSlice\";\nimport { setUserInfo } from \"../../redux/userSlice\";\nimport LazyImage from \"../../loaders/LazyImage\";\nimport useUniqueData from \"../../hooks/useUniqueData\";\nimport CardRating from \"../rating/CardRating\";\n\nconst CardListing = ({data, isFetching, pages, mediaType}) => {\n  const poster = useSelector(state => state.layout.poster);\n  const page = useSelector(state => state.layout.page);\n  const dispatch = useDispatch();\n  const cardRef = useRef();\n  const pathName = useLocation().pathname;\n  const cardAction = useSelector((state) => state.layout.cardAction);\n  const { uniqueItems } = useUniqueData(data)\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && !isFetching && (page < pages)) {\n        dispatch(setPage());\n      }\n      // unobserve on intersection\n      if (entries[0].isIntersecting) observer.unobserve(entries[0].target)\n    });\n    \n    // observe card\n    if(cardRef.current) observer.observe(cardRef.current);\n\n  }, [data, cardRef, isFetching, dispatch, pages, page, uniqueItems])\n\n  return (\n    <div className=\"w-full grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3\">\n\n    {/* Card Actions Body */}\n    {cardAction && <CardActions mediaType={mediaType} />}\n\n      {uniqueItems &&\n        uniqueItems.map((item) => (\n          <div\n            ref={cardRef}\n            key={item.id}\n            className=\"w-full aspect-[0.67/1] h-auto carousel-item flex flex-col rounded-md bg-nav cursor-pointer transition-all hover:scale-105 ease-in\"\n          >\n            <Link\n              aria-label=\"card\"\n              to={\n                item.media_type === \"movie\" || pathName.includes(\"/movies/\")\n                  ? `/movies/${item.id}`\n                  : item.media_type === \"tv\" || pathName.includes(\"/shows/\")\n                  ? `/shows/${item.id}`\n                  : item.media_type === \"person\" ||\n                    pathName.includes(\"/person/\")\n                  ? `/person/${item.id}`\n                  : \"\"\n              }\n            >\n              <LazyImage\n                src={\n                  item.poster_path\n                    ? poster + item.poster_path\n                    : item.profile_path\n                    ? poster + item.profile_path\n                    : EmptyCard\n                } \n                  placeholder={LoadingCard}\n                  type=\"card\"\n                />\n            </Link>\n            <div className=\"flex flex-col gap-1 px-2 py-1 sm:py-2\">\n              <Link\n                aria-label=\"card\"\n                to={\n                  item.media_type === \"movie\"\n                    ? `/movies/${item.id}`\n                    : item.media_type === \"tv\"\n                    ? `/shows/${item.id}`\n                    : item.media_type === \"person\"\n                    ? `/person/${item.id}`\n                    : \"\"\n                }\n              >\n                <h2 className=\"hidden sm:block sm:text-sm sm:font-medium truncate\">\n                  {item.original_title || item.original_name || item.name}\n                </h2>\n              </Link>\n              {item.known_for_department && (\n                  <h3 className=\"hidden sm:block sm:text-sm sm:font-light truncate\">\n                    {item.known_for_department}\n                  </h3>\n                )}\n              <div className=\"hidden sm:flex items-center gap-2\">\n                {/* Card Rating Component */}\n                {item.hasOwnProperty(\"vote_average\") && <CardRating item={item} />}\n                {item.vote_average > 0 ?\n                <span className=\"hidden sm:inline-block\">\n                  {item.vote_average?.toFixed(1)}\n                </span>\n                :\n                item.vote_average === 0 ?\n                <span className=\"hidden sm:inline-block\">\n                  N.A\n                </span>\n                :\n                null\n                }\n              </div>\n\n            {/* Card Actions */}\n            <div className=\"w-full flex justify-end items-center\"\n              onClick={() => {\n                dispatch(setCardAction(true))\n                dispatch(setUserInfo(item))\n              } }>\n            <FaEllipsisH className=\"text-lg\" />\n            </div>\n\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\nexport default CardListing;"],"mappings":"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"},"metadata":{},"sourceType":"module"}